<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="reservation">

	
	<!-- 마이페이지에서 예약 모든리스트 findAll -->
	<select id="list" resultType="reservationVO">
		select * from reservation where user_id=#{user_id}
	</select>
	
	<!-- 예약확인 detail -->
	<select id="detail" resultType="reservationVO">
		select * from reservation where user_id=#{user_id} and reservation_num=#{reservation_num}
	</select>
	
	<!-- reservation_num getNextNo -->
	<select id="getNextNum">
		select nvl(max(reservation_num), 0)+1 from reservation
	</select>
	
	<!-- 예약 할때 insert-->
	<insert id="insert">
		insert into reservation(reservation_num, user_num, place_num, room_num,
				reservation_park, reservation_spa, reservation_meal_cnt, reservation_price,
				reservation_checkin_date, reservation_checkout_date, reservation_people_cnt,
				reservation_s_dog_cnt, reservation_m_dog_cnt, reservation_l_dog_cnt) values(
				#{reservation_num}, #{user_num}, #{place_num}, #{room_num},
				#{reservation_park}, #{reservation_spa}, #{reservation_meal_cnt}, #{reservation_price},
				#{reservation_checkin_date}, #{reservation_checkout_date}, #{reservation_people_cnt},
				#{reservation_s_dog_cnt}, #{reservation_m_dog_cnt}, #{reservation_l_dog_cnt})
	</insert>
	
	<!-- 예약 변경 update 못하는걸로; 결제와 연관되어있어 복잡함 -->
	
	<!-- 예약 취소할때 delete-->
	<delete id="delete">
		delete from reservation where reservation_num=#{reservation_num}
	</delete>
	
</mapper>